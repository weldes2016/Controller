<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="head">
		<h:outputStylesheet name="css/flags/flags.css" library="demo" />
	</ui:define>

	<ui:define name="title">Envio Boletos Galax Pay</ui:define>

	<ui:define name="viewname">
		<li>FINANCEIRO</li>
		<li><i class="pi pi-chevron-right"></i></li>
		<li><p:link outcome="/table">ENVIO DE BOLETOS</p:link></li>
	</ui:define>

	<ui:define name="content">
		<h:form id="formDataTable">
			<style>
.cheap {
	background-color: #54a90a !important;
	background-image: none !important;
	color: #ffffff !important;
}
</style>

			<div class="grid table-demo">
				<div class="col-12">
					<div class="card">

						<p:growl id="msgs" showDetail="true"
							skipDetailIfEqualsSummary="true" />

						<p>Olá #{MBUsuario.usuarioLogado.nome} Abaixo a lista dos
							boletos da empresa #{MBUsuario.empresaSelecionada.nom} que ainda
							não foram enviados para cobrança.</p>
						<p:dataTable id="dtbBoletos" widgetVar="bolSDT" var="dup"
							resizableColumns="true" lazy="true"
							value="#{MBDuplicatas.listarBoletosGalaxPay(MBUsuarios.empresaSelecionada.usu)}"
							reflow="true" selection="#{MBDuplicatas.boletosSelecionados}"
							rowKey="#{dup.id_duprec}" paginator="true" rows="10"
							paginatorPosition="bottom" rowSelectMode="add"
							rowStyleClass="#{product.price le 50.0 ? 'cheap' : null}">

							<f:facet name="header">
								<div class="customers-table-header">
									<span style="font-weight: bold">BOLETOS</span> <span
										class="ui-input-icon-left filter-container"> <i
										class="pi pi-search" /> <p:inputText id="globalFilter"
											onkeyup="PF('bolSDT').filter()" placeholder="Pesquisa Geral" />
									</span>
								</div>
							</f:facet>
							<p:column selectionMode="multiple" style="width:2%" />


							<p:column headerText="Dupl." sortBy="#{dup.numdup}"
								filterBy="#{dup.numdup}" style="width:5%">
								<h:outputText value="#{dup.numdup}-#{dup.ordem}" />
							</p:column>
							<p:column headerText="NFSe" sortBy="#{dup.numNFSe}"
								filterBy="#{dup.numNFSe}" style="width:5%">
								<h:outputText value="#{dup.numNFSe}" />
							</p:column>

							<p:column headerText="Nome" sortBy="#{dup.descricao}"
								filterBy="#{dup.descricao}" style="width:18%">
								<h:outputText value="#{dup.descricao}"
									style="white-space: normal;" />
							</p:column>
							<p:column headerText="Documento" sortBy="#{dup.cpfCnpj}"
								filterBy="#{dup.cpfCnpj}" style="width:12%">
								<h:outputText value="#{dup.cpfCnpj}" />
							</p:column>
							<p:column headerText="Descrição" sortBy="#{dup.descricaoNfse}"
								filterBy="#{dup.descricaoNfse}" style="width:23%">
								<h:outputText value="#{dup.descricaoNfse}"
									style="white-space: normal;" />
							</p:column>


							<p:column headerText="Valor" sortBy="#{dup.valor}"
								filterBy="#{dup.valor}" style="width:6%">
								<h:outputText value="#{dup.valor}">
									<f:convertNumber pattern="¤#,##0.00" currencySymbol="R$" />
								</h:outputText>
							</p:column>

							<p:column headerText="Emissao" sortBy="#{dup.emissao}"
								filterBy="#{dup.emissao}" style="width:7%">
								<h:outputText value="#{dup.emissao}">
									<f:convertDateTime pattern="dd/MM/yy" />
								</h:outputText>
							</p:column>
							<p:column headerText="Vencimento" sortBy="#{dup.vencimento}"
								filterBy="#{dup.vencimento}" style="width:7%">
								<h:outputText value="#{dup.vencimento}">
									<f:convertDateTime pattern="dd/MM/yy" />
								</h:outputText>
							</p:column>


							<!-- 
                            <p:column headerText="Country" sortBy="#{customer.country.name}" filterBy="#{customer.country.name}">
                                <span class="flag flag-#{customer.country.code}" style="width: 30px; height: 20px"/>
                                <h:outputText style="vertical-align: middle; margin-left: .5rem" value="#{customer.country.name}" />
                            </p:column>
                            <p:column headerText="Representative" sortBy="#{customer.representative.name}" filterBy="#{customer.representative.name}">
                                <p:graphicImage name="images/avatar/#{customer.representative.image}" library="demo" width="32" style="vertical-align: middle" />
                                <h:outputText style="vertical-align: middle; margin-left: .5rem" value="#{customer.representative.name}" />
                            </p:column>
                            <p:column headerText="Join Date" sortBy="#{customer.date}" filterBy="#{customer.date}">
                                <h:outputText value="#{customer.date}" />
                            </p:column>
                            <p:column headerText="Status" sortBy="#{customer.status}" filterBy="#{customer.status}">
                                <span class="customer-badge status-#{customer.status.name().toLowerCase()}">#{customer.status}</span>
                            </p:column>
                            <p:column headerText="Activity" sortBy="#{customer.activity}">
                                <p:progressBar value="#{customer.activity}" displayOnly="true" style="height: .5rem"/>
                            </p:column>
                            <p:column style="width: 8rem; text-align: center;">
                                <p:button icon="pi pi-cog" styleClass="ui-button-secondary" />
                            </p:column>
                             -->
						</p:dataTable>
						<p:commandButton label="Enviar" value="Enviar"
							action="#{MBDuplicatas.enviarBoletosGalaxPay(MBDuplicatas.boletosSelecionados, MBUsuarios.empresaSelecionada)}"
							update="dtbBoletos">
						</p:commandButton>
						
					</div>
				</div>

			</div>

		</h:form>
	</ui:define>

</ui:composition>